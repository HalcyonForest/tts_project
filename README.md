# tts_project
нужно запустить main.ipynb
там пройдет скачивание всех необходимых файлов и датасетов. Результаты есть в папке резултс
Ссылка на скачивание чекпоинта: 

2 версия: https://57723853-911f-4a62-9297-3faec448d660.yds.yandexcloud.net/lab/v2/57723853-911f-4a62-9297-3faec448d660/files/tts_homework/model_new/checkpoint_20000.pth.tar?_xsrf=2%7C4af9168d%7C40435dcf5ce4d127e2baaf1814ebbc9a%7C1668591725

1 версия: https://57723853-911f-4a62-9297-3faec448d660.yds.yandexcloud.net/lab/v2/57723853-911f-4a62-9297-3faec448d660/files/tts_homework/wcheckpoint_99000/checkpoint_99000.pth.tar?_xsrf=2%7C4af9168d%7C40435dcf5ce4d127e2baaf1814ebbc9a%7C1668591725

(Сори за такое, у меня трафик ограничен и скачивание + загрузка 300мб заняли бы вечность... ;( 

Инференс: внизу ноутбука ячейки с загрузкой чекпоинта из папки.

Мне немного стыдно что после 30-40 потраченных часов на домашку, разгребания миллиона ошибок и багов мне не удалось до конца идеально обучить фастспич2 и у меня хорошо получилось только обучить первый фастспич, в итоге все равно тут все в каком-то беспорядке, но я правда очень старался эту домашку, да и вообще каждую. И если честно я очень переживаю что не смогу закрыть курс, так как он оказался для меня нереально сложным. Я надеюсь что проверять будут не сильно жёстко, потому что я не хочу отлететь на второй ИУП это для меня будет смерть.. Если есть какие-то вопросы или непонятки напишите пж в личку телеграма: @mistyotter и я отвечу на все вопросы и непонятки.


1. отчет - ? 
Ну я взял заполнил пропуски из исходного ноутбука, почитав фастспич1 и всповнив трансформеры. Потом я сделал pre-laernorm. Собрал все в красивенький проектик, где все распихано по своим папочкам. Затем я начал изучать статью фастспич2, после долгих мучений смог разобраться и закодить Pitch\Energy predictor.
Pitchpredictor - считаем таргеты с помощью pyworld dio, сохраняем в папочку чтобы потом быстро оттуда их доставать. Energy - считаем два раза норму по последнему dim от того, что получили прогнав вавку через torch.stft(). Потом в самой модели используем ту же архитектуру как и при предсказании duration. Везде предсказываем логарифмы для лучшей сходимости. для питча и энергии используем мсе лосс, для duration - l1. 

Ну а дальше все как-то как обычно - происходит инференс, делаем вавки какие получились. Мне грустно.


Репорты с вандб: 

https://wandb.ai/egortkachenko/TTS/reports/FastSpeech2--VmlldzozMDUwMTEw?accessToken=kslr1kocqzawho0i3z262xibmefutropa777pc8a8u0xbjs9f8fi9ut0f2xffz0j

более последний но тут чет пошло вверх а потом опять вниз.

https://wandb.ai/egortkachenko/TTS/reports/---VmlldzozMDUwMTI0?accessToken=x4dwc31im3crttmxhbvh1wdxw706p1po2m862iqssi0i21o8fi1s33ba14fugku0
